
<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml">

<head>

  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="robots" content="noindex"/>
  <title>Precios Acsendo</title>
  <link href="../css/style.css" rel="stylesheet" type="text/css"/>
  <link rel="stylesheet" href="../js/check/jquery-labelauty.css"/>
  <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet"/>
  <script src="../js/jquery.min.js"></script>
  <script src="../js/excellentexport.min.js"></script>
  <script src="../js/check/jquery-labelauty.js"></script>
  <script type="text/javascript" src="../js/jspdf.debug.js"></script>
  <script type="text/javascript" src="../js/basic_co.js"></script>
  <script src="../js/jspdf.plugin.autotable.src.js"></script>
  <script src="../js/require.js"></script>

</head>

<body>
  <div class="bg_image">
    <div class="bg_color"></div>
    <div class="bg_container">
      <div class="logo"></div>
      <div class="box_container">
        <div class="price_box left">
          <h3 class="margintop30">Precio</h3>
          <div class="box_price">
            <div class="header">
              <div class="centrar margintop20">
                <div class="price">
                  0.00
                </div>
                <div class="price_moeda">
                  $
                </div>
                <p class="fontsize13 margintop20 font600 fontbranco descr_price">
                  Precio en COP
                </p>
              </div>

            </div>
            <div class="margintop20" style="height: calc(100% - 140px);">
              <div class="tipo_div centrar fontsize13 font600"></div>
              <div class="emp_div centrar margintop20 fontsize14 font400"></div>
              <div class="emp_div_price centrar margintop10 fontsize12 font400"></div>
              <div class="incl">

              </div>
              <div class="incl2">
                <div class="centrar margintop20 names2">
                  <div class="name_clima font400 fontsize13 lineheight150 inlineblock"></div>
                  <div class="name_2646 font400 fontsize13 lineheight150 inlineblock"></div>
                  <div class="name_competencias font400 fontsize13 lineheight150 inlineblock"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="calculator_box right">
          <div class="container">
            <div class="left">
              <h5>Modalidad de Productos</h5>
              <div class="left margintop20">
                <input type="radio" name="tipo" value="0" class="left" checked="true" data-labelauty="Suscripción Anual"/>
                <input type="radio" name="tipo" value="1" class="left left20" data-labelauty="Evaluación Única"/>
              </div>
            </div>

            <div class="left clear margintop30">
              <h5>Número de empleados</h5>
              <div class="left margintop20">
                <input class="input_emp" type="number" min="0" max="5000" onkeypress="return isNumber(event);"/>
              </div>
              <p class="left fontsize13 margintop30 left10">
                Empleados
              </p>
            </div>

            <div class="left clear margintop30">
              <div class="sub bottom20">
                <h5>Paquetes</h5>
                <div class="left margintop20 no_float">
                  <input type="checkbox" id="total" name="produto_premium" value="2" class="left radio_prod" data-labelauty="Flex Total"/>
                </div>
                <div class="left margintop20">
                  <input type="checkbox" name="produto_premium" value="3" class="left radio_prod" data-labelauty="Flex Desempeño"/>
                  <input type="checkbox" name="produto_premium" value="9" class="left radio_prod" data-labelauty="Flex Desarrollo"/>
                  <input type="checkbox" name="produto_premium" value="10" class="left radio_prod" data-labelauty="Flex Engagement"/>
                </div>
                <h5 class="left clear margintop20">Módulos</h5>
                <div class="left margintop20 clear">
                  <input type="checkbox" name="produto" value="4" class="left prod" data-labelauty="Metas"/>
                  <input type="checkbox" name="produto" value="0" class="left prod" data-labelauty="Competencias"/>
                  <input type="checkbox" name="produto" value="5" class="left prod" data-labelauty="PID"/>
                  <input type="checkbox" name="produto" value="6" class="left prod" data-labelauty="Reconocimiento"/>
                  <input type="checkbox" name="produto" value="11" class="left prod" data-labelauty="Plan de Sucesión"/>
                </div>
              </div>
              <h5 class="left clear ">Evaluación Única</h5>
              <div class="left margintop20 clear width100">
                <div class="left bottom20 width100">
                  <input type="checkbox" name="climaInp" value="7" class="left prod" data-labelauty="Clima"/>
                  <div id="minus_clima" class=" left left10 bot-minus"></div>
                  <div id="plus_clima" class=" left left20 bot-plus"></div>
                  <h4 class="left left20 color_nr_ind" id="nr_clima">0</h4>
                </div>
                <div class="left bottom20 width100">
                  <h6 class="left margintop5">2646</h6>
                  <div id="minus_2646" class=" left left10 bot-minus"></div>
                  <div id="plus_2646" class=" left left20 bot-plus"></div>
                  <h4 class="left left20 color_nr_ind" id="nr_2646">0</h4>
                </div>
                <div id="comp_eval" class="left bottom20 width100">
                  <h6 class="left margintop5">Competencias</h6>
                  <div id="minus_comp" class=" left left10 bot-minus"></div>
                  <div id="plus_comp" class=" left left20 bot-plus"></div>
                  <h4 class="left left20 color_nr_ind" id="nr_comp">0</h4>
                </div>
                <!--<div class="left bottom20 width100">
                <h6 class="left margintop5">Cultura</h6><div id="plus_culture" class=" left left20 bot-plus"></div><div id="minus_culture" class=" left left10 bot-minus"></div><h4 class="left left20 color_nr_ind" id="nr_culture">0</h4>
              </div>-->
              <div class="left">
                <h5>Moneda</h5>
                <div class="left margintop20">
                  <input type="radio" name="currency" value="cop" class="left left20" checked="true" data-labelauty="COP"/>
                  <!--<input type="radio" name="currency" value="eur" class="left left20 bottom10 curr" data-labelauty="EUR"/>
                  <input type="radio" name="currency" value="crc" class="left left20 bottom10 curr" data-labelauty="CRC"/>
                  <input type="radio" name="currency" value="dop" class="left left20 bottom10 curr" data-labelauty="DOP"/>
                  <input type="radio" name="currency" value="ecs" class="left left20 bottom10 curr" data-labelauty="ECS"/>
                  <input type="radio" name="currency" value="svc" class="left left20 bottom10 curr" data-labelauty="SVC"/>
                  <input type="radio" name="currency" value="gtq" class="left left20 bottom10 curr" data-labelauty="GTQ"/>
                  <input type="radio" name="currency" value="hnl" class="left left20 bottom10 curr" data-labelauty="HNL"/>
                  <input type="radio" name="currency" value="nio" class="left left20 bottom10 curr" data-labelauty="NIO"/>
                  <input type="radio" name="currency" value="pab" class="left left20 bottom10 curr" data-labelauty="PAB"/>-->
                </div>
              </div>


            </div>
            <div id="dvData" class="left margintop20">
              <table class="table_precios">
                <tr style="margin-bottom:30px">
                  <th>Precio en COP</th>
                  <th></th>
                  <th></th>
                  <th></th>
                </tr>
                <tr style="color:white; background-color:#2d363c;">
                  <th>Modulo</th>
                  <th>Precio por colaborador</th>
                  <th>Nr Colaboradores</th>
                  <th>Precio total</th>
                </tr>

              </table>
            </div>


          </div>
          <a href="#" download="precio.xls" onclick="return ExcellentExport.excel(this, 'dvData', 'Precio');" class="exp_button left margintop30" role='button'><i class="fa fa-download right5" aria-hidden="true"></i>Descargar Tabla</a>

          <a href="javascript:propuesta()" class="exp_button left left20 margintop30" role='button'><i class="fa fa-file-text-o right5" aria-hidden="true"></i>Generar Propuesta</a>

          <a href="#" class="clear_button left left20 margintop30" role='button'><i class="fa fa-undo right5" aria-hidden="true"></i>Borrar datos</a>

        </div>

        <div class="form_propuesta" style="display:none">
        	<h3 class="margintop30 left">Propuesta Comercial</h3>
        	<div class="container2">
                <div class="left clear margintop30 width100">
                  <select class="" id="comercial">
                    <option value="1">Carlos Santana</option>
                    <option value="2" selected>Francisco Mendes</option>
                    <option value="6">Nathalia Ramirez</option>
                    <option value="9">Christian Rodriguezz</option>
                    <option value="10">Camila Diaz</option>
                    <option value="11">Carlos Rojas</option>
                    <option value="12">Paola Riañoz</option>
                    <option value="13">Sebastián Linares</option>
                    <option value="14">Astrid Niño</option>
                    <option value="15">Ivan Manosalva</option>
                    <option value="16">Francisco Toledo</option>
                  </select>
	        	</div>
	        	<div class="left clear margintop30 width100">
	        	  <h5>Nombre de la Empresa</h5>
	        	  <div class="left margintop20 width100">
	        	    <input class="input" id="nombre_emp" type="text"/>
	        	  </div>

	        	</div>

	        	<div class="left clear margintop30 width100">
	        		<h5>Persona de Contacto</h5>
	        		 <div class="left margintop20 width100">
	        		   <input class="input" id="nombre_cliente" type="text"/>
	        		 </div>
	        	</div>

	        	<div class="left clear margintop30 width100">
	        		<h5>Observaciones <small>(opcional)</small></h5>
	        		<div class="left margintop20 width100">
                <textarea class="text_area" id="obs">La forma de pago es por medio de tarjeta de crédito usando la plataforma de PayU.

Acsendo realizara un incremento de precios anual del 3%.</textarea>
	        		</div>
	        	</div>

	        	<div class="left clear margintop30 width100">
	        		<h5>Nombre del Archivo</h5>
	        		<div class="left margintop20 width100">
	        		   <input class="input" id="nombre_arch" type="text"/>
	        		</div>
	        	</div>

                <div class="left clear margintop30 width100">
	        		<a class="bot_edit_p" href="#"><i class="fa fa-pencil rigth5" aria-hidden="true"></i>Editar</a>
	        	</div>

                <div id="edit_precios" class="left width100">
                    <div class="left width100 margintop15">
                        <div class="div_name_p_header">Item</div>
                        <div class="input_p_nr_header">Nr</div>
                        <div class="input_p_u_header">Precio p/emp</div>
                        <div class="input_p_header">Precio</div>
                    </div>

                    <div class="produto_inputs margintop5 left bottom20">

                    </div>

                </div>


	        	<a href="javascript:generarp()" class="exp_button left margintop30" role='button'><i class="fa fa-download right5" aria-hidden="true"></i>Descargar Propuesta</a>

	        	<a href="javascript:volver()" class="back_button left left20 margintop30" role='button'><i class="fa fa-undo right5" aria-hidden="true"></i>Volver</a>

          </div>
        </div>
      </div>

    </div>
    <div class="left width100">
      <div class="centrar margintop20" style="width:155px;">
        <div class="flag co left">
        </div>
        <div class="flag_text2 left fontsize13 font300 paddingtop3 left5 fontbranco">
          <b style="font-weight:500">Acsendo</b>Colombia
        </div>

      </div>
    </div>
  </div>
    </div>
</body>

<script>

var deretchoAClima;
var produtos = [];

$(document).ready(function(){
  $(":radio").labelauty();
  $(":checkbox").labelauty();
  $(".tipo_div").html("Suscripción Anual");
  $(".descr_price").html("Precio en COP al año");
  $("#comp_eval").css("display","none");
  var clima=0;
  var comp=0;
  var eval2646=0;
  var price_total=0;
  var price_persona=0;


  $('.input_emp').bind('input', function() {
    var nr=$(this).val();
    $(".emp_div").html(nr+" empleados");
    if (nr <= 5000){
        calculate_price();
    } else {
        alert("mais de 5000 empleados. Debe hacer una propuesta a la medida");
        $(".price").html("ERROR!")
    }
  });

  $("input[name='tipo']").change(function(){
    var type = $("input[name='tipo']:checked").val();
    if(type==0){
      $(".descr_price").html("Precio en COP al año");
      $(".sub").css("display","block");
      $("#comp_eval").css("display","none");
      $(".tipo_div").html("Suscripción Anual");
    }else{
      $(".descr_price").html("Precio en COP");
      $(".sub").css("display","none");
      $("#comp_eval").css("display","block");
      $(".tipo_div").html("Evaluación Única");
    }
    clima=0;
    comp=0;
    reset();
  });

  $("input[name='produto_premium']").click(function(){
    //$("input[name='produto_premium']").not(this).prop('checked', false);

    var produto_clicked = $(this).val();

    for(var i = 0; i < $("input[name='produto_premium']").length; i++){
        var temp = $("input[name='produto_premium']").eq(i);

        if (temp.is(":checked")){
            produtos[i] = true;
        } else {
            produtos[i] = false;
        }
    }

    console.log("produto  " + produtos + "   " + produto_clicked);

    if (produto_clicked == 2) {
        if (produtos[0]) {
            $("input[name='produto_premium']").attr('checked', true);
            $("input[name='produto']").attr('disabled', true);
            produtos[1] = true; produtos[2] = true; produtos[3] = true;
        } else {
            $("input[name='produto_premium']").attr('checked', false);
            $("input[name='produto']").attr('disabled', false);
            produtos[1] = false; produtos[2] = false; produtos[3] = false;
        }
    } else {

        if ((produtos[1] && produtos[2] && produtos[3])) {
            produtos[0] = true;
            $("input[name='produto_premium']").eq(0).attr('checked', true);
        } else {
            produtos[0] = false;
            $("input[name='produto_premium'][value='2']").attr('checked', false);
        }

    }
    if (produtos[1]){ //3 — DESEMPEÑO
        $("input[name='produto'][value='4'], input[name='produto'][value='0']").attr('disabled', true).attr('checked', false);
    } else {
        $("input[name='produto'][value='4'], input[name='produto'][value='0']").attr('disabled', false);
    }
    if (produtos[2]){ //9 — DESARROLLO
        $("input[name='produto'][value='5'], input[name='produto'][value='11']").attr('disabled', true).attr('checked', false);
    } else {
        $("input[name='produto'][value='5'], input[name='produto'][value='11']").attr('disabled', false);
    }
    if (produtos[3]){ //10— ENGAGEMENT
        $("input[name='produto'][value='6']").attr('disabled', true).attr('checked', false);
        //Engagement = RECON + CLIMA
    } else {
        $("input[name='produto'][value='6']").attr('disabled', false);
    }
    /*
    if(produto=="2"){
      //$("input[name='produto']").attr('disabled', true);
      //$("input[name='produto']").attr('checked', false);
      $("input[name='produto_premium']").attr('checked', true);
    }
    else if(produto=="3"){
      //$("input[name='produto']").attr('checked', false);
      //$("input[name='produto']").attr('disabled', false);
      $("input[name='produto'][value='4']").attr('disabled', true);
      $("input[name='produto'][value='0']").attr('disabled', true);
    }
    else if(produto=="9"){
      //$("input[name='produto']").attr('checked', false);
      //$("input[name='produto']").attr('disabled', false);
      $("input[name='produto'][value='5']").attr('disabled', true);
      $("input[name='produto'][value='11']").attr('disabled', true);
    }
    else if(produto=="10"){
      //$("input[name='produto']").attr('checked', false);
      //$("input[name='produto']").attr('disabled', false);
      $("input[name='produto'][value='6']").attr('disabled', true);
      //Engagement = RECON + CLIMA
      //$("input[name='produto'][value='11']").attr('disabled', true);
    }
    else{
      $("input[name='produto']").attr('disabled', false);
    }
    */
    calculate_price();
  });

  $("input[name='produto']").change(function(){
    //var produto = $("input[name='produto_premium']:checked").val();
    if(produtos[0]){
      $("input[name='produto_premium']").attr('checked', false);
    }
    if(produtos[1]){
      $(".incl").html('<div class="centrar font600 fontsize13 margintop30">Incluye</div><div class="centrar font400 fontsize13 lineheight150 margintop20 names">Metas, Competencias, </div>');
    }
    if(produtos[2]){
      $(".incl").html('<div class="centrar font600 fontsize13 margintop30">Incluye</div><div class="centrar font400 fontsize13 lineheight150 margintop20 names">Competencias, PID, </div>');
    }


    calculate_price();
  });






  $("input[name='produto'], input[name='produto_premium'], input[name='tipo']").change(function(){

      var type = $("input[name='tipo']:checked").val();

      var productos_seleccionados = $("input[name='produto']:checked, input[name='produto_premium']:checked").length;
      if (productos_seleccionados == 0 && type == 0) {
          deretchoAClima = false;
          clima = 0;
          $("#nr_clima").html(clima);
          eval2646 = 0;
          $("#nr_2646").html(eval2646);
          calculate_price();
      } else {
          deretchoAClima = true;
      }
  });








  $("#plus_clima").click(function(){
    if (deretchoAClima) {
        clima=clima+1;
        $("#nr_clima").html(clima);
        $("input[name='climaInp'][value='7']").attr('checked', true);
        calculate_price();
    }
  });

  $("#minus_clima").click(function(){
    if (deretchoAClima) {
        if(clima>0){
          clima=clima-1;
        }
        $("#nr_clima").html(clima);
        calculate_price();
    }
  });

  $("#plus_comp").click(function(){
    if (deretchoAClima) {
        comp=comp+1;
        if(clima==0) {
            $("input[name='climaInp'][value='7']").attr('checked', false);
          }
        $("#nr_comp").html(comp);
        calculate_price();
    }
  });

  $("#minus_comp").click(function(){
    if (deretchoAClima) {
        if(comp>0){
          comp=comp-1;
        }
        $("#nr_comp").html(comp);
        calculate_price();
    }
  });
  $("#plus_2646").click(function(){
    if (deretchoAClima) {
        eval2646=eval2646+1;
        $("#nr_2646").html(eval2646);
        calculate_price();
    }
  });

  $("#minus_2646").click(function(){
    if (deretchoAClima) {
        if(eval2646>0){
          eval2646=eval2646-1;
        }
        $("#nr_2646").html(eval2646);
        calculate_price();
    }
  });
  $(".clear_button").click(function(){
    clima=0;
    comp=0;
    eval2646=0;
    reset();
  });

  $("input[name='currency']").change(function(){
    converter();
  });
});

var json = [];

function calculate_price(){

  json = [];
  var type = $("input[name='tipo']:checked").val();

  var produto_pr = produtos;//$("input[name='produto_premium']:checked").val();

    console.log("PRODUTO_PR    " + produto_pr);

  var nr=$(".input_emp").val();
  var selected = [];
  var clima=$("#nr_clima").html();
  var competencias=$("#nr_comp").html();
  var evaluacion2636=$("#nr_2646").html();


  var rangos = [{
          min: 0,
          max: 20
      }, {
          min: 21,
          max: 34
      }, {
          min: 35,
          max: 50
      },{
          min: 51,
          max: 75
      }, {
          min: 76,
          max: 100
      }, {
          min: 101,
          max: 150
      }, {
          min: 151,
          max: 200
      }, {
          min: 201,
          max: 250
      }, {
          min: 251,
          max: 300
      }, {
          min: 301,
          max: 400
      }, {
          min: 401,
          max: 500
      }, {
          min: 501,
          max: 600
      }, {
          min: 601,
          max: 700
      }, {
          min: 701,
          max: 800
      }, {
          min: 801,
          max: 900
      }, {
          min: 901,
          max: 1e3
      }, {
          min: 1001,
          max: 1100
      }, {
          min: 1101,
          max: 1200
      }, {
          min: 1201,
          max: 1300
      }, {
          min: 1301,
          max: 1400
      }, {
          min: 1401,
          max: 1500
      }, {
          min: 1501,
          max: 3e3
      }, {
          min: 3001,
          max: 5e3
      }],
      prices = [{
          type: "anual",
          produto: [{
              produto: "Competencias",
              price: [{
                  rango: 0,
                  price: 112320
              },{
                  rango: 1,
                  price: 102115
              },{
                  rango: 2,
                  price: 94500
              }, {
                  rango: 3,
                  price: 84880
              }, {
                  rango: 4,
                  price: 74560
              }, {
                  rango: 5,
                  price: 68240
              }, {
                  rango: 6,
                  price: 59040
              }, {
                  rango: 7,
                  price: 51840
              }, {
                  rango: 8,
                  price: 48240
              }, {
                  rango: 9,
                  price: 44640
              }, {
                  rango: 10,
                  price: 41040
              }, {
                  rango: 11,
                  price: 37440
              }, {
                  rango: 12,
                  price: 36360
              }, {
                  rango: 13,
                  price: 35640
              }, {
                  rango: 14,
                  price: 34560
              }, {
                  rango: 15,
                  price: 33840
              }, {
                  rango: 16,
                  price: 33120
              }, {
                  rango: 17,
                  price: 32040
              }, {
                  rango: 18,
                  price: 31320
              }, {
                  rango: 19,
                  price: 30240
              }, {
                  rango: 20,
                  price: 29520
              }, {
                  rango: 21,
                  price: 28800
              }, {
                  rango: 22,
                  price: 25920
              }, {
                  rango: 23,
                  price: 20160
              }]
          }, {
              produto: "Clima",
              price: [{
                  rango: 0,
                  price: 37450
              }, {
                  rango: 1,
                  price: 32225
              },{
                  rango: 2,
                  price: 27110
              },{
                  rango: 3,
                  price: 22200
              }, {
                  rango: 4,
                  price: 20160
              }, {
                  rango: 5,
                  price: 18900
              }, {
                  rango: 6,
                  price: 16800
              }, {
                  rango: 7,
                  price: 14700
              }, {
                  rango: 8,
                  price: 13650
              }, {
                  rango: 9,
                  price: 12600
              }, {
                  rango: 10,
                  price: 11550
              }, {
                  rango: 11,
                  price: 10500
              }, {
                  rango: 12,
                  price: 10080
              }, {
                  rango: 13,
                  price: 9870
              }, {
                  rango: 14,
                  price: 9660
              }, {
                  rango: 15,
                  price: 9450
              }, {
                  rango: 16,
                  price: 9240
              }, {
                  rango: 17,
                  price: 8820
              }, {
                  rango: 18,
                  price: 8610
              }, {
                  rango: 19,
                  price: 8400
              }, {
                  rango: 20,
                  price: 8190
              }, {
                  rango: 21,
                  price: 7980
              }, {
                  rango: 22,
                  price: 7350
              }, {
                  rango: 23,
                  price: 5670
              }]
          }, {
              produto: "total",
              price: [{
                  rango: 0,
                  price: 286695
              }, {
                  rango: 1,
                  price: 276862
              },{
                  rango: 2,
                  price: 256462
              },{
                  rango: 3,
                  price: 218250
              }, {
                  rango: 4,
                  price: 188256
              }, {
                  rango: 5,
                  price: 165255
              }, {
                  rango: 6,
                  price: 145245
              }, {
                  rango: 7,
                  price: 125235
              }, {
                  rango: 8,
                  price: 117300
              }, {
                  rango: 9,
                  price: 109710
              }, {
                  rango: 10,
                  price: 102120
              }, {
                  rango: 11,
                  price: 94530
              }, {
                  rango: 12,
                  price: 92115
              }, {
                  rango: 13,
                  price: 90045
              }, {
                  rango: 14,
                  price: 87630
              }, {
                  rango: 15,
                  price: 85560
              }, {
                  rango: 16,
                  price: 83490
              }, {
                  rango: 17,
                  price: 81075
              }, {
                  rango: 18,
                  price: 79005
              }, {
                  rango: 19,
                  price: 76590
              }, {
                  rango: 20,
                  price: 74520
              }, {
                  rango: 21,
                  price: 72450
              }, {
                  rango: 22,
                  price: 60375
              }, {
                  rango: 23,
                  price: 46575
              }]
          }, {
              produto: "desempeño",
              price: [{
                  rango: 0,
                  price: 194400
              }, {
                  rango: 1,
                  price: 182150
              },{
                  rango: 2,
                  price: 172600
              },{
                  rango: 3,
                  price: 139600
              }, {
                  rango: 4,
                  price: 123520
              }, {
                  rango: 5,
                  price: 109440
              }, {
                  rango: 6,
                  price: 95040
              }, {
                  rango: 7,
                  price: 80640
              }, {
                  rango: 8,
                  price: 76320
              }, {
                  rango: 9,
                  price: 72e3
              }, {
                  rango: 10,
                  price: 67680
              }, {
                  rango: 11,
                  price: 63360
              }, {
                  rango: 12,
                  price: 61920
              }, {
                  rango: 13,
                  price: 60480
              }, {
                  rango: 14,
                  price: 59040
              }, {
                  rango: 15,
                  price: 57600
              }, {
                  rango: 16,
                  price: 56160
              }, {
                  rango: 17,
                  price: 54720
              }, {
                  rango: 18,
                  price: 53280
              }, {
                  rango: 19,
                  price: 51840
              }, {
                  rango: 20,
                  price: 50400
              }, {
                  rango: 21,
                  price: 48960
              }, {
                  rango: 22,
                  price: 37440
              }, {
                  rango: 23,
                  price: 28800
              }]
          }, {
              produto: "Metas",
              price: [{
                  rango: 0,
                  price: 112320
              }, {
                  rango: 1,
                  price: 102115
              },{
                  rango: 2,
                  price: 94500
              },{
                  rango: 3,
                  price: 84880
              }, {
                  rango: 4,
                  price: 74560
              }, {
                  rango: 5,
                  price: 68240
              }, {
                  rango: 6,
                  price: 59040
              }, {
                  rango: 7,
                  price: 51840
              }, {
                  rango: 8,
                  price: 48240
              }, {
                  rango: 9,
                  price: 44640
              }, {
                  rango: 10,
                  price: 41040
              }, {
                  rango: 11,
                  price: 37440
              }, {
                  rango: 12,
                  price: 36360
              }, {
                  rango: 13,
                  price: 35640
              }, {
                  rango: 14,
                  price: 34560
              }, {
                  rango: 15,
                  price: 33840
              }, {
                  rango: 16,
                  price: 33120
              }, {
                  rango: 17,
                  price: 32040
              }, {
                  rango: 18,
                  price: 31320
              }, {
                  rango: 19,
                  price: 30240
              }, {
                  rango: 20,
                  price: 29520
              }, {
                  rango: 21,
                  price: 28800
              }, {
                  rango: 22,
                  price: 25920
              }, {
                  rango: 23,
                  price: 20160
              }]
          }, {
              produto: "PID",
              price: [{
                  rango: 0,
                  price: 70200
              }, {
                  rango: 1,
                  price: 62100
              },{
                  rango: 2,
                  price: 55500
              },{
                  rango: 3,
                  price: 49120
              }, {
                  rango: 4,
                  price: 44280
              }, {
                  rango: 5,
                  price: 41400
              }, {
                  rango: 6,
                  price: 37080
              }, {
                  rango: 7,
                  price: 32400
              }, {
                  rango: 8,
                  price: 29880
              }, {
                  rango: 9,
                  price: 27720
              }, {
                  rango: 10,
                  price: 25560
              }, {
                  rango: 11,
                  price: 23400
              }, {
                  rango: 12,
                  price: 22680
              }, {
                  rango: 13,
                  price: 22320
              }, {
                  rango: 14,
                  price: 21600
              }, {
                  rango: 15,
                  price: 21240
              }, {
                  rango: 16,
                  price: 20520
              }, {
                  rango: 17,
                  price: 20160
              }, {
                  rango: 18,
                  price: 19440
              }, {
                  rango: 19,
                  price: 19080
              }, {
                  rango: 20,
                  price: 18360
              }, {
                  rango: 21,
                  price: 18e3
              }, {
                  rango: 22,
                  price: 16200
              }, {
                  rango: 23,
                  price: 12600
              }]
          }, {
              produto: "Reconocimiento",
              price: [{
                  rango: 0,
                  price: 22500
              }, {
                  rango: 1,
                  price: 20200
              },{
                  rango: 2,
                  price: 17050
              },{
                  rango: 3,
                  price: 15e3
              }, {
                  rango: 4,
                  price: 14100
              }, {
                  rango: 5,
                  price: 13200
              }, {
                  rango: 6,
                  price: 11700
              }, {
                  rango: 7,
                  price: 10200
              }, {
                  rango: 8,
                  price: 9300
              }, {
                  rango: 9,
                  price: 8700
              }, {
                  rango: 10,
                  price: 7800
              }, {
                  rango: 11,
                  price: 7200
              }, {
                  rango: 12,
                  price: 6900
              }, {
                  rango: 13,
                  price: 6600
              }, {
                  rango: 14,
                  price: 6600
              }, {
                  rango: 15,
                  price: 6300
              }, {
                  rango: 16,
                  price: 6300
              }, {
                  rango: 17,
                  price: 6e3
              }, {
                  rango: 18,
                  price: 5700
              }, {
                  rango: 19,
                  price: 5700
              }, {
                  rango: 20,
                  price: 5400
              }, {
                  rango: 21,
                  price: 5400
              }, {
                  rango: 22,
                  price: 4800
              }, {
                  rango: 23,
                  price: 3600
              }]
          }, {
              produto: "Clima",
              price: [{
                  rango: 0,
                  price: 34500
              }, {
                  rango: 1,
                  price: 31250
              },{
                  rango: 2,
                  price: 26110
              },{
                  rango: 3,
                  price: 22700
              }, {
                  rango: 4,
                  price: 18060
              }, {
                  rango: 5,
                  price: 17010
              }, {
                  rango: 6,
                  price: 15120
              }, {
                  rango: 7,
                  price: 13230
              }, {
                  rango: 8,
                  price: 12180
              }, {
                  rango: 9,
                  price: 11340
              }, {
                  rango: 10,
                  price: 10290
              }, {
                  rango: 11,
                  price: 9450
              }, {
                  rango: 12,
                  price: 9030
              }, {
                  rango: 13,
                  price: 8820
              }, {
                  rango: 14,
                  price: 8610
              }, {
                  rango: 15,
                  price: 8400
              }, {
                  rango: 16,
                  price: 8190
              }, {
                  rango: 17,
                  price: 7980
              }, {
                  rango: 18,
                  price: 7770
              }, {
                  rango: 19,
                  price: 7560
              }, {
                  rango: 20,
                  price: 7350
              }, {
                  rango: 21,
                  price: 7140
              }, {
                  rango: 22,
                  price: 6510
              }, {
                  rango: 23,
                  price: 5040
              }]
          }, {
              produto: "Clima",
              price: [{
                  rango: 0,
                  price: 23400
              }, {
                  rango: 1,
                  price: 20200
              },{
                  rango: 2,
                  price: 17050
              },{
                  rango: 3,
                  price: 15120
              }, {
                  rango: 4,
                  price: 14280
              }, {
                  rango: 5,
                  price: 13440
              }, {
                  rango: 6,
                  price: 11970
              }, {
                  rango: 7,
                  price: 10500
              }, {
                  rango: 8,
                  price: 9660
              }, {
                  rango: 9,
                  price: 9030
              }, {
                  rango: 10,
                  price: 8190
              }, {
                  rango: 11,
                  price: 7560
              }, {
                  rango: 12,
                  price: 7350
              }, {
                  rango: 13,
                  price: 7140
              }, {
                  rango: 14,
                  price: 6930
              }, {
                  rango: 15,
                  price: 6720
              }, {
                  rango: 16,
                  price: 6510
              }, {
                  rango: 17,
                  price: 6300
              }, {
                  rango: 18,
                  price: 6090
              }, {
                  rango: 19,
                  price: 5880
              }, {
                  rango: 20,
                  price: 5670
              }, {
                  rango: 21,
                  price: 5670
              }, {
                  rango: 22,
                  price: 5040
              }, {
                  rango: 23,
                  price: 3990
              }]
          }, {
              produto: "desarrollo",
              price: [{
                  rango: 0,
                  price: 110565
              }, {
                  rango: 1,
                  price: 102115
              },{
                  rango: 2,
                  price: 94500
              },{
                  rango: 3,
                  price: 84880
              }, {
                  rango: 4,
                  price: 74560
              }, {
                  rango: 5,
                  price: 62244
              }, {
                  rango: 6,
                  price: 54155
              }, {
                  rango: 7,
                  price: 45864
              }, {
                  rango: 8,
                  price: 43257
              }, {
                  rango: 9,
                  price: 40849
              }, {
                  rango: 10,
                  price: 38441
              }, {
                  rango: 11,
                  price: 36036
              }, {
                  rango: 12,
                  price: 35190
              }, {
                  rango: 13,
                  price: 34425
              }, {
                  rango: 14,
                  price: 33579
              }, {
                  rango: 15,
                  price: 32813
              }, {
                  rango: 16,
                  price: 31834
              }, {
                  rango: 17,
                  price: 31203
              }, {
                  rango: 18,
                  price: 30223
              }, {
                  rango: 19,
                  price: 29592
              }, {
                  rango: 20,
                  price: 28611
              }, {
                  rango: 21,
                  price: 27846
              }, {
                  rango: 22,
                  price: 21294
              }, {
                  rango: 23,
                  price: 16380
              }]
          }, {
              produto: "engagement",
              price: [{
                  rango: 0,
                  price: 71674
              }, {
                  rango: 1,
                  price: 62100
              },{
                  rango: 2,
                  price: 55500
              },{
                  rango: 3,
                  price: 49120
              }, {
                  rango: 4,
                  price: 44505
              }, {
                  rango: 5,
                  price: 41314
              }, {
                  rango: 6,
                  price: 36311
              }, {
                  rango: 7,
                  price: 31309
              }, {
                  rango: 8,
                  price: 29325
              }, {
                  rango: 9,
                  price: 27428
              }, {
                  rango: 10,
                  price: 25530
              }, {
                  rango: 11,
                  price: 23633
              }, {
                  rango: 12,
                  price: 23029
              }, {
                  rango: 13,
                  price: 22511
              }, {
                  rango: 14,
                  price: 21908
              }, {
                  rango: 15,
                  price: 21390
              }, {
                  rango: 16,
                  price: 20872
              }, {
                  rango: 17,
                  price: 20269
              }, {
                  rango: 18,
                  price: 19751
              }, {
                  rango: 19,
                  price: 19148
              }, {
                  rango: 20,
                  price: 18630
              }, {
                  rango: 21,
                  price: 18113
              }, {
                  rango: 22,
                  price: 15094
              }, {
                  rango: 23,
                  price: 11644
              }]
          }, {
              produto: "Plan de Sucesión",
              price: [{
                  rango: 0,
                  price: 56160
              }, {
                  rango: 1,
                  price: 48200
              },{
                  rango: 2,
                  price: 43150
              },{
                  rango: 3,
                  price: 38440
              }, {
                  rango: 4,
                  price: 35280
              }, {
                  rango: 5,
                  price: 33120
              }, {
                  rango: 6,
                  price: 29520
              }, {
                  rango: 7,
                  price: 25920
              }, {
                  rango: 8,
                  price: 24120
              }, {
                  rango: 9,
                  price: 22320
              }, {
                  rango: 10,
                  price: 20520
              }, {
                  rango: 11,
                  price: 18720
              }, {
                  rango: 12,
                  price: 18180
              }, {
                  rango: 13,
                  price: 17820
              }, {
                  rango: 14,
                  price: 17280
              }, {
                  rango: 15,
                  price: 16920
              }, {
                  rango: 16,
                  price: 16560
              }, {
                  rango: 17,
                  price: 16020
              }, {
                  rango: 18,
                  price: 15660
              }, {
                  rango: 19,
                  price: 15120
              }, {
                  rango: 20,
                  price: 14760
              }, {
                  rango: 21,
                  price: 14400
              }, {
                  rango: 22,
                  price: 12960
              }, {
                  rango: 23,
                  price: 10080
              }]
          }]
      }, {
          type: "unico",
          produto: [{
              produto: "Competencias",
              price: [{
                  rango: 0,
                  price: 87750
              }, {
                  rango: 1,
                  price: 58500
              },{
                  rango: 2,
                  price: 58500
              },{
                  rango: 3,
                  price: 58500
              }, {
                  rango: 4,
                  price: 55200
              }, {
                  rango: 5,
                  price: 51900
              }, {
                  rango: 6,
                  price: 46200
              }, {
                  rango: 7,
                  price: 40500
              }, {
                  rango: 8,
                  price: 37500
              }, {
                  rango: 9,
                  price: 34800
              }, {
                  rango: 10,
                  price: 32100
              }, {
                  rango: 11,
                  price: 29400
              }, {
                  rango: 12,
                  price: 28500
              }, {
                  rango: 13,
                  price: 27900
              }, {
                  rango: 14,
                  price: 27300
              }, {
                  rango: 15,
                  price: 26400
              }, {
                  rango: 16,
                  price: 25800
              }, {
                  rango: 17,
                  price: 25200
              }, {
                  rango: 18,
                  price: 24300
              }, {
                  rango: 19,
                  price: 23700
              }, {
                  rango: 20,
                  price: 23100
              }, {
                  rango: 21,
                  price: 22500
              }, {
                  rango: 22,
                  price: 20400
              }, {
                  rango: 23,
                  price: 15900
              }]
          }, {
              produto: "Clima",
              price: [{
                  rango: 0,
                  price: 41700
              }, {
                  rango: 1,
                  price: 30660
              },{
                  rango: 2,
                  price: 30660
              },{
                  rango: 3,
                  price: 30660
              }, {
                  rango: 4,
                  price: 28770
              }, {
                  rango: 5,
                  price: 27090
              }, {
                  rango: 6,
                  price: 24150
              }, {
                  rango: 7,
                  price: 21210
              }, {
                  rango: 8,
                  price: 19740
              }, {
                  rango: 9,
                  price: 18270
              }, {
                  rango: 10,
                  price: 16800
              }, {
                  rango: 11,
                  price: 15330
              }, {
                  rango: 12,
                  price: 14910
              }, {
                  rango: 13,
                  price: 14490
              }, {
                  rango: 14,
                  price: 14070
              }, {
                  rango: 15,
                  price: 13860
              }, {
                  rango: 16,
                  price: 13440
              }, {
                  rango: 17,
                  price: 13020
              }, {
                  rango: 18,
                  price: 12810
              }, {
                  rango: 19,
                  price: 12390
              }, {
                  rango: 20,
                  price: 11970
              }, {
                  rango: 21,
                  price: 11760
              }, {
                  rango: 22,
                  price: 10710
              }, {
                  rango: 23,
                  price: 8190
              }]
          }, {
              produto: "Clima",
              price: [{
                  rango: 0,
                  price: 43750
              }, {
                  rango: 1,
                  price: 27510
              },{
                  rango: 2,
                  price: 27510
              },{
                  rango: 3,
                  price: 27510
              }, {
                  rango: 4,
                  price: 25830
              }, {
                  rango: 5,
                  price: 24360
              }, {
                  rango: 6,
                  price: 21630
              }, {
                  rango: 7,
                  price: 18900
              }, {
                  rango: 8,
                  price: 17430
              }, {
                  rango: 9,
                  price: 16170
              }, {
                  rango: 10,
                  price: 14910
              }, {
                  rango: 11,
                  price: 13650
              }, {
                  rango: 12,
                  price: 13230
              }, {
                  rango: 13,
                  price: 13020
              }, {
                  rango: 14,
                  price: 12600
              }, {
                  rango: 15,
                  price: 12390
              }, {
                  rango: 16,
                  price: 11970
              }, {
                  rango: 17,
                  price: 11760
              }, {
                  rango: 18,
                  price: 11340
              }, {
                  rango: 19,
                  price: 11130
              }, {
                  rango: 20,
                  price: 10710
              }, {
                  rango: 21,
                  price: 10500
              }, {
                  rango: 22,
                  price: 9450
              }, {
                  rango: 23,
                  price: 7350
              }]
          }, {
              produto: "Clima",
              price: [{
                  rango: 0,
                  price: 31800
              }, {
                  rango: 1,
                  price: 21840
              },{
                  rango: 2,
                  price: 21840
              },{
                  rango: 3,
                  price: 21840
              }, {
                  rango: 4,
                  price: 20580
              }, {
                  rango: 5,
                  price: 19320
              }, {
                  rango: 6,
                  price: 17220
              }, {
                  rango: 7,
                  price: 15120
              }, {
                  rango: 8,
                  price: 14070
              }, {
                  rango: 9,
                  price: 13020
              }, {
                  rango: 10,
                  price: 11970
              }, {
                  rango: 11,
                  price: 10920
              }, {
                  rango: 12,
                  price: 10500
              }, {
                  rango: 13,
                  price: 10290
              }, {
                  rango: 14,
                  price: 10080
              }, {
                  rango: 15,
                  price: 9870
              }, {
                  rango: 16,
                  price: 9660
              }, {
                  rango: 17,
                  price: 9240
              }, {
                  rango: 18,
                  price: 9030
              }, {
                  rango: 19,
                  price: 8820
              }, {
                  rango: 20,
                  price: 8610
              }, {
                  rango: 21,
                  price: 8400
              }, {
                  rango: 22,
                  price: 7560
              }, {
                  rango: 23,
                  price: 5880
              }]
          }, {
              produto: "2646",
              price: [{
                  rango: 0,
                  price: 15e3
              }, {
                  rango: 1,
                  price: 1e4
              },{
                  rango: 2,
                  price: 1e4
              },{
                  rango: 3,
                  price: 1e4
              }, {
                  rango: 4,
                  price: 9e3
              }, {
                  rango: 5,
                  price: 8e3
              }, {
                  rango: 6,
                  price: 7500
              }, {
                  rango: 7,
                  price: 7e3
              }, {
                  rango: 8,
                  price: 6500
              }, {
                  rango: 9,
                  price: 6e3
              }, {
                  rango: 10,
                  price: 5500
              }, {
                  rango: 11,
                  price: 5e3
              }, {
                  rango: 12,
                  price: 4900
              }, {
                  rango: 13,
                  price: 4800
              }, {
                  rango: 14,
                  price: 4700
              }, {
                  rango: 15,
                  price: 4600
              }, {
                  rango: 16,
                  price: 4500
              }, {
                  rango: 17,
                  price: 4400
              }, {
                  rango: 18,
                  price: 4300
              }, {
                  rango: 19,
                  price: 4200
              }, {
                  rango: 20,
                  price: 4100
              }, {
                  rango: 21,
                  price: 4e3
              }, {
                  rango: 22,
                  price: 3500
              }, {
                  rango: 23,
                  price: 3e3
              }]
          }]
      }];

  var rango_nr;
  price_total=0;
  price_persona=0;
  $(".incl").html("");

  $(".table_precios .comp").remove();
  $(".table_precios .clima").remove();
  $(".table_precios .p").remove();
  $(".table_precios .p2").remove();
  $(".table_precios .p3").remove();
  $(".table_precios .total").remove()


  for(var i = 0; i < rangos.length; i++){
    if(nr>=rangos[i].min && nr<=rangos[i].max){
      rango_nr=i;
    }
  }


  if(produto_pr != null){
    //var price=price=prices[type].produto[produto_pr].price[rango_nr].price * 1.05;
    var price = 0;

      //for loop sum to >> price
      if (produto_pr[0]){
          price+=(prices[type].produto[2].price[rango_nr].price * 1.05) * 1.05;
      } else {
          for(var i = 1; i < produto_pr.length; i++){
              if (produto_pr[i]){
                  var loopToVal = 0;
                  if (i == 1){
                      loopToVal = 3;
                  } else if (i == 2) {
                      loopToVal = 9;
                  } else if (i == 3) {
                      loopToVal = 10;
                  }
                  price+=(prices[type].produto[loopToVal].price[rango_nr].price * 1.05) * 1.05;
              }
          }
      }

      console.log("PRICE   " + price);
    var price_un=price*nr;
    price_total=price_total+(price*nr);
      console.log("PRICE_TOTAL   " + price_total);
    price_persona=price_persona+price;
    if(produto_pr[0]){
      $(".incl").html('<div class="centrar font600 fontsize13 margintop30">Incluye</div><div class="centrar font400 fontsize13 lineheight150 margintop20 names">Metas, Competencias, PID, 2x Clima, Reconocimiento Plan de Sucesión</div>');
      $(".table_precios").append("<tr class='p2'><td>Flex Total(Metas; Competencias; PID; 2x Clima; Reconocimiento)</td><td>"+price.toFixed(2)+"</td><td>"+nr+"</td><td>"+price_un.toFixed(2)+"</td></tr>");

      json.push({produto : 'Flex Total',produto2 : 'Flex Total (Metas; Competencias; PID; 2x Clima; Reconocimiento)', precio_u:price.toFixed(2), nr: nr,precio_t:price_un.toFixed(2)});
    }else{
        var tempSideText = "";
        //FLEX DESEMPEÑO
        if(produto_pr[1]){
          if (tempSideText == ""){
              tempSideText = '<div class="centrar font600 fontsize13 margintop30">Incluye</div><div class="centrar font400 fontsize13 lineheight150 margintop20 names">';
          } else {
              tempSideText = tempSideText + " + ";
          }
          tempSideText = tempSideText + 'Metas, Competencias ';

          $(".table_precios").append("<tr class='p3'><td>Flex Desempeño(Metas; Competencias )</td><td>"+((prices[type].produto[3].price[rango_nr].price * 1.05) * 1.05).toFixed(4)+"</td><td>"+nr+"</td><td>"+(((prices[type].produto[3].price[rango_nr].price * 1.05) * 1.05) * nr).toFixed(4)+"</td></tr>");

          json.push({produto : 'Flex Desempeño', produto2 : 'Flex Desempeño (Metas; Competencias; ', precio_u:((prices[type].produto[3].price[rango_nr].price * 1.05) * 1.05).toFixed(4), nr: nr,precio_t:(((prices[type].produto[3].price[rango_nr].price * 1.05) * 1.05) * nr).toFixed(4)});
        }
        //FLEX DESARROLLO
        if(produto_pr[2]){
          if (tempSideText == ""){
              tempSideText = '<div class="centrar font600 fontsize13 margintop30">Incluye</div><div class="centrar font400 fontsize13 lineheight150 margintop20 names">';
          } else {
              tempSideText = tempSideText + " + ";
          }
          tempSideText = tempSideText + 'PID, Plan de Sucesión ';

          $(".table_precios").append("<tr class='p3'><td>Flex Desarrollo(PID; Plan de Sucesión; )</td><td>"+((prices[type].produto[9].price[rango_nr].price * 1.05) * 1.05).toFixed(4)+"</td><td>"+nr+"</td><td>"+(((prices[type].produto[9].price[rango_nr].price * 1.05) * 1.05) * nr).toFixed(4)+"</td></tr>");

          json.push({produto : 'Flex Derarrollo', produto2 : 'Flex Desarrollo (PID; Plan de Sucesión; ', precio_u:((prices[type].produto[9].price[rango_nr].price * 1.05) * 1.05).toFixed(4), nr: nr,precio_t:(((prices[type].produto[9].price[rango_nr].price * 1.05) * 1.05) * nr).toFixed(4)});
        }
        //FLEX ENGAGEMENT
        if(produto_pr[3]){
          if (tempSideText == ""){
              tempSideText = '<div class="centrar font600 fontsize13 margintop30">Incluye</div><div class="centrar font400 fontsize13 lineheight150 margintop20 names">';
          } else {
              tempSideText = tempSideText + " + ";
          }
          tempSideText = tempSideText + 'Reconocimiento, Clima ';

          $(".table_precios").append("<tr class='p3'><td>Flex Desarrollo(Reconocimiento; Clima )</td><td>"+((prices[type].produto[10].price[rango_nr].price * 1.05) * 1.05).toFixed(4)+"</td><td>"+nr+"</td><td>"+(((prices[type].produto[10].price[rango_nr].price * 1.05) * 1.05) * nr).toFixed(4)+"</td></tr>");

          json.push({produto : 'Flex Derarrollo', produto2 : 'Flex Desarrollo (Reconocimiento; Clima; ', precio_u:((prices[type].produto[10].price[rango_nr].price * 1.05) * 1.05).toFixed(4), nr: nr,precio_t:(((prices[type].produto[10].price[rango_nr].price * 1.05) * 1.05) * nr).toFixed(4)});
        }
        if (tempSideText != ""){
              tempSideText = tempSideText + "</div>";
        }
        $(".incl").html(tempSideText);
    }

  }
  else{
    $(".incl").html('<div class="centrar font600 fontsize13 margintop30">Incluye</div><div class="centrar font400 fontsize13 lineheight150 margintop20 names"></div>');
  }

  var total = $("input[name='produto']:checked").length;
  if(total>0 && produto_pr==3){
    $(".names").html("Metas, Competencias, ");
  } else if(total>0 && produto_pr==9){
    $(".names").html("Competencias, PID, ");
  }

  $("input[name='produto']:checked").each(function(index) {
    var price=(prices[type].produto[$(this).attr('value')].price[rango_nr].price * 1.05) * 1.05;

    if (index === total - 1) {
      $(".names").append(prices[type].produto[$(this).attr('value')].produto);
      $(".names").append(" ");
    }else{
      $(".names").append(prices[type].produto[$(this).attr('value')].produto + ", ");
    }
    var price_un=price*nr;
    $(".table_precios").append("<tr class='p'><td>"+prices[type].produto[$(this).attr('value')].produto+"</td><td>"+price+"</td><td>"+nr+"</td><td>"+price_un.toFixed(2)+"</td></tr>");

    json.push({produto : prices[type].produto[$(this).attr('value')].produto, produto2 : prices[type].produto[$(this).attr('value')].produto, precio_u:price.toFixed(2), nr: nr,precio_t:price_un.toFixed(2)});

    price_total=price_total+(price*nr);
    price_persona=price_persona+price;

      console.log("PRODUTO");

  });


  if(competencias>0){
    var price=(prices[1].produto[0].price[rango_nr].price * 1.05) * 1.05;
    price_total=price_total+(price*nr*competencias);
    price_persona=price_persona+(price*competencias);
    var price_un=price*nr*competencias;
    var price_un2=price*competencias;

    $(".table_precios").append("<tr class='comp'><td>"+competencias+"x Competencias</td><td>"+price_un2.toFixed(2)+"</td><td>"+nr+"</td><td>"+price_un.toFixed(2)+"</td></tr>");

    json.push({produto :+competencias+"x Competencias",produto2 :+competencias+"x Competencias", precio_u:price_un2.toFixed(2), nr: nr,precio_t:price_un.toFixed(2)});

    $(".name_competencias").html(competencias+ "x Competencias ");
  }else{
    $(".name_competencias").html("");
  }

  if(evaluacion2636>0){
    var price=(prices[1].produto[4].price[rango_nr].price * 1.05) * 1.05;
    price_total=price_total+(price*nr*evaluacion2636);
    price_persona=price_persona+(price*evaluacion2636);
    var price_un=price*nr*evaluacion2636;
    var price_un2=price*evaluacion2636;

    $(".table_precios").append("<tr class='comp'><td>"+evaluacion2636+"x 2646</td><td>"+price_un2.toFixed(2)+"</td><td>"+nr+"</td><td>"+price_un.toFixed(2)+"</td></tr>");
    $(".name_2646").html(evaluacion2636+ "x 2646 ");

    json.push({produto :+evaluacion2636+"x 2646",produto2 :+evaluacion2636+"x 2646", precio_u:price_un2.toFixed(2), nr: nr,precio_t:price_un.toFixed(2)});
  }else{
    $(".name_2646").html("");
  }

  if(clima>0){
    var price_un1=0;
    var price_un2=0;
    if(type==0){

      if( produto_pr[0] ){
        var price=(prices[0].produto[8].price[rango_nr].price * 1.05) * 1.05;
        price_total=price_total+(price*nr*clima);
        price_persona=price_persona+(price*clima);
        price_un1=price*nr*clima;
        price_un2=price*clima;

          console.log("CLIMAA     " + price_total);
      }else{
        if(clima==1){
          var price=(prices[0].produto[1].price[rango_nr].price * 1.05) * 1.05;
          price_total=price_total+(price*nr*clima);
          price_persona=price_persona+(price*clima);
          price_un1=price*nr*clima;
          price_un2=price*clima;
        }
        else if(clima==2){
          var price1=(prices[0].produto[1].price[rango_nr].price * 1.05) * 1.05;
          var price2=(prices[0].produto[7].price[rango_nr].price * 1.05) * 1.05;
          price_total=price_total+(price1*nr)+(price2*nr);
          price_persona=price_persona+price1+price2;
          price_un1=(price1*nr)+(price2*nr);
          price_un2=price1+price2;
        }else{
          var price1=(prices[0].produto[1].price[rango_nr].price * 1.05) * 1.05;
          var price2=(prices[0].produto[7].price[rango_nr].price * 1.05) * 1.05;
          var price3=(prices[0].produto[8].price[rango_nr].price * 1.05) * 1.05;
          var price3_nr=clima-2;
          price_total=price_total+(price1*nr)+(price2*nr)+(price3*nr*price3_nr);
          price_persona=price_persona+price1+price2+(price3*price3_nr);
          price_un1=(price1*nr)+(price2*nr)+(price3*nr*price3_nr);
          price_un2=price1+price2+(price3*price3_nr);
        }
      }
    }
    else{
      if(clima==1){
        var price=(prices[1].produto[1].price[rango_nr].price * 1.05) * 1.05;
        price_total=price_total+(price*nr*clima);
        price_persona=price_persona+(price*clima);
        price_un1=price*nr*clima;
        price_un2=price*clima;
      }
      else if(clima==2){
        var price1=(prices[1].produto[1].price[rango_nr].price * 1.05) * 1.05;
        var price2=(prices[1].produto[2].price[rango_nr].price * 1.05) * 1.05;
        price_total=price_total+(price1*nr)+(price2*nr);
        price_persona=price_persona+price1+price2;
        price_un1=(price1*nr)+(price2*nr);
        price_un2=price1+price2;
      }else{
        var price1=(prices[1].produto[1].price[rango_nr].price * 1.05) * 1.05;
        var price2=(prices[1].produto[2].price[rango_nr].price * 1.05) * 1.05;
        var price3=(prices[1].produto[3].price[rango_nr].price * 1.05) * 1.05;
        var price3_nr=clima-2;
        price_total=price_total+(price1*nr)+(price2*nr)+(price3*nr*price3_nr);
        price_persona=price_persona+price1+price2+(price3*price3_nr);
        price_un1=(price1*nr)+(price2*nr)+(price3*nr*price3_nr);
        price_un2=price1+price2+(price3*price3_nr);
      }
    }
    $(".table_precios").append("<tr class='clima'><td>"+clima+"x Clima</td><td>"+price_un2.toFixed(2)+"</td><td>"+nr+"</td><td>"+price_un1.toFixed(2)+"</td></tr>");

    json.push({produto :+clima+"x Clima", produto2 :+clima+"x Clima", precio_u:price_un2.toFixed(2), nr: nr,precio_t:price_un1.toFixed(2)});

    $(".name_clima").html(clima+ "x Clima, ");
  }else{
    $(".name_clima").html("");
  }

  $(".table_precios").append("<tr class='total'><td><b>TOTAL</b></td><td><b>"+price_persona.toFixed(2)+"</b></td><td><b>"+nr+"</b></td><td><b>"+price_total.toFixed(2)+"</b></td></tr>");

  json.push({produto :"TOTAL", produto2 :"TOTAL", precio_u:"", nr: "",precio_t:price_total.toFixed(2)});


  var price_new=addCommas(price_total.toFixed(2));
  var price_new2=addCommas(price_persona.toFixed(4));
  $(".price").html(price_new);
  console.log("PRICEEEEEE : " + price_new);
  $(".emp_div_price").html("("+price_new2 + "$ por empleado)");
  converter();
}


function reset(){
  price_total=0;
  price_persona=0;

  $("input[name='produto_premium']").attr('checked', false);
  $("input[name='produto']").attr('checked', false);
  $("input[name='produto']").attr('disabled', false);

  $(".incl").html("");
  $(".name_clima").html("");
  $(".name_competencias").html("");

  $(".price").html("0.00");
  $(".emp_div_price").html("(0$ por empleado)");
  $(".input_emp").val('0');
  $(".emp_div").html("0 empleados");

  $("#nr_comp").html("0");
  $("#nr_clima").html("0");

  $(".table_precios .comp").remove();
  $(".table_precios .clima").remove();
  $(".table_precios .p").remove();
  $(".table_precios .p2").remove();
  $(".table_precios .p3").remove();
  $(".table_precios .total").remove()
}

$(".bot_edit_p").click(function(){
    $("#edit_precios").animate({
        height: "toggle"
    }, 500, function() {
    // Animation complete.
    });
});

function exportTableToCSV($table, filename) {
  var $headers = $table.find('tr:has(th)')
  ,$rows = $table.find('tr:has(td)')
  // Temporary delimiter characters unlikely to be typed by keyboard
  // This is to avoid accidentally splitting the actual contents
  ,tmpColDelim = String.fromCharCode(11) // vertical tab character
  ,tmpRowDelim = String.fromCharCode(0) // null character
  // actual delimiter characters for CSV format
  ,colDelim = '","'
  ,rowDelim = '"\r\n"';
  // Grab text from table into CSV formatted string
  var csv = '"';
  csv += formatRows($headers.map(grabRow));
  csv += rowDelim;
  csv += formatRows($rows.map(grabRow)) + '"';
  // Data URI
  var csvData = 'data:application/csv;charset=utf-8,' + encodeURIComponent(csv);
  $(this)
  .attr({
    'download': filename
    ,'href': csvData
    //,'target' : '_blank' //if you want it to open in a new window
  });
  //------------------------------------------------------------
  // Helper Functions
  //------------------------------------------------------------
  // Format the output so it has the appropriate delimiters
  function formatRows(rows){
    return rows.get().join(tmpRowDelim)
    .split(tmpRowDelim).join(rowDelim)
    .split(tmpColDelim).join(colDelim);
  }
  // Grab and format a row from the table
  function grabRow(i,row){

    var $row = $(row);
    //for some reason $cols = $row.find('td') || $row.find('th') won't work...
    var $cols = $row.find('td');
    if(!$cols.length) $cols = $row.find('th');
    return $cols.map(grabCol)
    .get().join(tmpColDelim);
  }
  // Grab and format a column from the table
  function grabCol(j,col){
    var $col = $(col),
    $text = $col.text();
    return $text.replace('"', '""'); // escape double quotes
  }
}
// This must be a hyperlink
$("#export").click(function (event) {
  // var outputFile = 'export'
  var outputFile = window.prompt("Nombre del archivo") || 'export';
  outputFile = outputFile.replace('.csv','') + '.csv'

  // CSV
  exportTableToCSV.apply(this, [$('#dvData>table'), outputFile]);

  // IF CSV, don't do event.preventDefault() or return false
  // We actually need this to be a typical hyperlink
});

function isNumber(e){
  e = e || window.event;
  var charCode = e.which ? e.which : e.keyCode;
  return /\d/.test(String.fromCharCode(charCode));
}


</script>
<script>
function httpGet(theUrl)
{
  var xmlHttp = null;
  xmlHttp = new XMLHttpRequest();
  xmlHttp.open( "GET", theUrl, false );
  xmlHttp.send( null );
  return xmlHttp.responseText;
}
function currencyConverter(currency_from,currency_to,currency_input){
  var yql_base_url = "https://query.yahooapis.com/v1/public/yql";
  var yql_query = 'select%20*%20from%20yahoo.finance.xchange%20where%20pair%20in%20("'+currency_from+currency_to+'")';
  var yql_query_url = yql_base_url + "?q=" + yql_query + "&format=json&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys";
  var http_response = httpGet(yql_query_url);
  var http_response_json = JSON.parse(http_response);
  //console.log(http_response);

  return http_response_json.query.results.rate.Rate;
}
var moneda;

var currency_input = 1;
var currency_from_usd = "USD"; // currency codes : http://en.wikipedia.org/wiki/ISO_4217
var currency_to_eur = "EUR";
var rate_eur = 1;//currencyConverter(currency_from_usd,currency_to_eur,currency_input);
var currency_to_crc = "CRC";
var rate_crc = 1;//currencyConverter(currency_from_usd,currency_to_crc,currency_input);
var currency_to_dop = "DOP";
var rate_dop = 1;//currencyConverter(currency_from_usd,currency_to_dop,currency_input);
var currency_to_ecs = "ECS";
var rate_ecs = 1;//currencyConverter(currency_from_usd,currency_to_ecs,currency_input);
var currency_to_svc = "SVC";
var rate_svc = 1;//currencyConverter(currency_from_usd,currency_to_svc,currency_input);
var currency_to_gtq = "GTQ";
var rate_gtq = 1;//currencyConverter(currency_from_usd,currency_to_gtq,currency_input);
var currency_to_hnl = "HNL";
var rate_hnl = 1;//currencyConverter(currency_from_usd,currency_to_hnl,currency_input);
var currency_to_nio = "NIO";
var rate_nio = 1;//currencyConverter(currency_from_usd,currency_to_nio,currency_input);
var currency_to_pab = "PAB";
var rate_pab = 1;//currencyConverter(currency_from_usd,currency_to_pab,currency_input);


function converter(){
  moneda = $("input[name='currency']:checked").val();
  var price=0;
  var price_per=0;
  var symbol="$";
  var moneda = "usd"
  if(moneda == "usd"){
    price=price_total;
    price_per=price_persona;
    symbol="$"
  }else if(moneda == "eur"){
    price=rate_eur*price_total;
    price_per=rate_eur*price_persona;
    symbol="€"
  }
  else if(moneda == "crc"){
    price=rate_crc*price_total;
    price_per=rate_crc*price_persona;
    symbol="₡"
  }
  else if(moneda == "dop"){
    price=rate_dop*price_total;
    price_per=rate_dop*price_persona;
    symbol="RD$"
  }
  else if(moneda == "ecs"){
    price=rate_ecs*price_total;
    price_per=rate_ecs*price_persona;
    symbol="S/."
  }
  else if(moneda == "svc"){
    price=rate_svc*price_total;
    price_per=rate_svc*price_persona;
    symbol="‎₡"
  }
  else if(moneda == "gtq"){
    price=rate_gtq*price_total;
    price_per=rate_gtq*price_persona;
    symbol="‎Q"
  }
  else if(moneda == "hnl"){
    price=rate_hnl*price_total;
    price_per=rate_hnl*price_persona;
    symbol="‎L"
  }
  else if(moneda == "nio"){
    price=rate_nio*price_total;
    price_per=rate_nio*price_persona;
    symbol="‎C$"
  }
  else if(moneda == "pab"){
    price=rate_pab*price_total;
    price_per=rate_pab*price_persona;
    symbol="‎PAB"
  }
  var price_new=addCommas(price.toFixed(2));
  var price_new2=addCommas(price_per.toFixed(4));
  $(".price").html(price_new);
  console.log("asoidhaosd  " + moneda);
  $(".price_moeda").html(symbol);
  $(".emp_div_price").html("(" + price_new2 + symbol + " por empleado)");
}

function addCommas(nStr){
        nStr += '';
        x = nStr.split('.');
        x1 = x[0];
        x2 = x.length > 1 ? '.' + x[1] : '';
        var rgx = /(\d+)(\d{3})/;
        while (rgx.test(x1)) {
            x1 = x1.replace(rgx, '$1' + ' ' + '$2');
    }
        return x1 + x2;
}
</script>
</html>
